---

layout: post
title:  "第7部分：软件工艺"
date:   2014-10-20 12:30:00

---


### 第31章 布局与风格


#### 1、基本原则

* 格式化的基本原理

	使代码看起来有条理的最大意义莫过于展示出代码的结构。请选择能够更好的给出代码结构而不是使代码更悦目的方法。


* 人和计算机对程序的解读

	布局是关于程序结构的有用暗示。计算机可能只关心花括号或者begin/end，而人在看程序时总倾向于从代码的视觉外观获取提示。

* 好布局有什么用

	如果程序语句按照有意义的方式布局，高手能比新手更好的记住语句。而当程序乱七八糟时，高手的优势就不明显了。

	结构能帮助高手去感知、理解和记住程序的重要特性。编程高手通常会恪守自己的风格，即使和其他高手的风格迥然不同。底线是前后如一的组织程序。

* 把布局作为一种信仰

	强调对程序理解的重要性，并把程序结构化成熟知的形式，引发了编程风格不同时是否会影响他人对程序的理解能力的思考。这意味着对编程格式的针轮请起来更像是宗教斗争，而非在讨论哲学。


* 良好布局的目标

	* 准备表现代码的逻辑结构
	* 始终如一的表现代码的逻辑结构
	* 改善可读性
	* 经得起修改


#### 2、布局技术

* 空白

	空白能够增强可读性，空白包括空格、制表符、换行、空行，是展现程序结构的主要手段。

	* 分组

		从另一个角度看，空白也是分组。也是确保相关语句成组放在一起。

	* 空行

		将不相关语句分隔开也很有必要。代码中的一个段落的前面应该加入空行。		

	* 缩进
		
		用缩进形式显示程序的逻辑结构。作为一项守则，那些逻辑上隶属于某语句的语句都应缩进。

* 括号

	括号应该用得比你觉得需要的更多。对包含两个以上的项的表达式，应该用括号去澄清之。括号使得语义更加清晰且不会损失什么。

#### 3、布局风格

常见布局风格：

* 纯块结构

	有些语言并不要求块结构，并因此会产生很多缩进问题。请为程序添加构成代码块的元素（begin/end或花括号），弥补语言结构上的不良设计。

* 模仿纯块结构

	如果语言不支持纯块结构，可以讲关键字begin/end 或{/}看出是所在控制结构的扩展。

* 使用begin-end对（花括号）指定块边界
* 行尾布局

	行尾布局是一大组代码缩进至行中间或结尾的布局策略，用来将代码块作为该块开始的关键子对其，是子程序的其余参数与第一个参数对其或在case语句中将各种情况对齐等。

哪种风格最优

	所有风格都不绝对可靠，都偶尔需要进行合理而明显的折中。





更多有关[《代码大全 2》的读书笔记](http://tabalt.net/blog/code-complete-2-reading-notes/)，请关注 ：  
[http://tabalt.net/blog/code-complete-2-reading-notes/](http://tabalt.net/blog/code-complete-2-reading-notes/)




