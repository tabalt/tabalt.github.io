---

layout: post
title:  "第24章：重构"
date:   2014-10-10 12:30:00
categories: 博文

---

在初始开发阶段，代码会有实质性的进化，会出现很多剧烈的改变。代码首次编写后就已经完美，测试通过即可抛到脑后的情况只是不存在的神话。


#### 1、	软件演化的类型

软件演化就像生物进化一样，有些突变是有益的，有些则是有害的。区分软件演化类型的关键是程序的质量在这一过程中是提高了还是降低了，演化是源于程序构建中的修改，还是维护过程中的修改。

演化一开始就充满危险，但同时也是是你的软件开发接近完美的天赐良机。一旦有机会重新审视你的程序，就用自己的全部所学去改进它。


#### 2、重构简介

重构是指在不改变软件外部行为的前提下，对其内部结构进行改变，使之更容易理解并便于修改。重构是实现软件演化基本准则的最关键策略。

标志着程序需要重构的信号：

* 代码重复
* 冗长的子程序
* 循环过长或嵌套过深
* 内聚性太差的类
* 类的接口未能提供层次一致的抽象
* 拥有太多参数的参数列表
* 类的内部修改往往被局限于某个部分
* 变化导致对多个类的相同修改
* 对继承体系的同样修改
* case语句需要做相同的修改
* 同时使用的相关数据并未以类的方式进行组织
* 成员函数使用其他类的特征比使用自身类的特征还要多
* 过多使用基本数据类型
* 某个类无所事事
* 一系列传递流浪数据的子程序
* 中间人对象无事可做
* 某个类同其他类关系过于亲密
* 子程序命名不恰当
* 数据成员被设置为公用
* 某个派生类仅使用了基类的很少一部分成员函数
* 注释被用于解释难懂的代码
* 使用了全局变量
* 在子程序调用前使用了设置代码，调用后使用了收尾代码
* 程序中的一些代码似乎是在将来的某个时候才会用到

超前设计的问题：

* 超前设计的代码，需求不可能定义得很完备
* 即使程序员对未来需求的前瞻几近完全准确，他也不可能广泛预见未来需求的所有复杂脉络
* 使用超前设计代码的未来程序员们并不值得自己手中的代码原本是经过超前设计的，或许他们会期望这些代码能比实际情况表现更好
* 超前设计的代码是画蛇添足，增加了程序的复杂性。


#### 3、特定的重构






更多有关[《代码大全 2》的读书笔记](http://tabalt.net/blog/code-complete-2-reading-notes/)，请关注 ：  
[http://tabalt.net/blog/code-complete-2-reading-notes/](http://tabalt.net/blog/code-complete-2-reading-notes/)




